(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{143:function(e,t,n){},144:function(e,t,n){},151:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},162:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(20),i=n.n(s),u=(n(143),n(144),n(12)),o=n.n(u),d=n(19),j=n(10),b=n(14),l=n(27),O=n(25),f=n(23),m=n(9),h=n(218),x=n(92),v=n(217),p=n.p+"static/media/social-media.5e1ad944.png",g=n(212),y=n(216),k=(n(151),function(){return Object(r.jsx)(g.a,{position:"static",children:Object(r.jsxs)(y.a,{id:"buttons-bar-container",children:[Object(r.jsx)(l.b,{className:"link-to-register",to:"/login",children:Object(r.jsx)(v.a,{className:"button-link",children:"Login"})}),Object(r.jsx)(l.b,{className:"link-to-register",to:"/register",children:Object(r.jsx)(v.a,{className:"button-link",children:"Register"})})]})})}),N=(n(155),function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(k,{}),Object(r.jsx)("div",{className:"container-home",children:Object(r.jsxs)(h.a,{className:"grid-home",container:!0,children:[Object(r.jsxs)(h.a,{className:"register-home",item:!0,xs:12,md:6,children:[Object(r.jsx)(x.a,{variant:"h2",gutterBottom:!0,children:"Are you new here?"}),Object(r.jsx)(x.a,{variant:"h3",children:"you can register here."}),Object(r.jsx)(l.b,{className:"link-to-register",to:"/register",children:Object(r.jsx)(v.a,{style:{width:"95%"},variant:"contained",color:"primary",children:"Register"})})]}),Object(r.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(r.jsx)("img",{className:"img-home",src:p,alt:"img-home"})})]})})]})}),S=n(233);n(156);function C(){var e=Object(b.a)(["\n    mutation Register($username:String!, $password:String!, $birthday:String!, $email:String!){ \n        register(\n            registerInput: {\n            username:$username\n            email: $email\n            password: $password\n            birthday: $birthday\n            }\n        ){\n            id\n            token\n            email\n            username\n        }\n    }\n"]);return C=function(){return e},e}var w=Object(m.gql)(C()),$=Object(f.b)(null,(function(e){return{setUser:function(t){e({type:"SET_USER",user:t})}}}))((function(e){var t=e.setUser,n=Object(a.useState)(null),c=Object(j.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(null),b=Object(j.a)(u,2),l=b[0],f=b[1],h=Object(a.useState)(null),p=Object(j.a)(h,2),g=p[0],y=p[1],k=Object(a.useState)(null),N=Object(j.a)(k,2),C=N[0],$=N[1],I=Object(O.g)(),D=Object(m.useMutation)(w),F=Object(j.a)(D,1)[0],U=function(){var e=Object(d.a)(o.a.mark((function e(n){var r,a,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),s&&l&&g&&C){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,F({variables:{username:s,email:l,password:g,birthday:C}});case 5:r=e.sent,a=r.data,c=a.register,i=c.id,u=c.token,localStorage.setItem("token",u),t({id:i,email:l,username:s}),I.push("/feed");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{id:"register-container",children:Object(r.jsxs)("div",{id:"form-register-container",children:[Object(r.jsx)(x.a,{variant:"h4",style:{textAlign:"center"},children:"Register"}),Object(r.jsxs)("form",{onSubmit:U,children:[Object(r.jsx)(S.a,{className:"textfield-register",label:"username",onChange:function(e){return i(e.currentTarget.value)}}),Object(r.jsx)(S.a,{className:"textfield-register",type:"email",label:"email",onChange:function(e){return f(e.currentTarget.value)}}),Object(r.jsx)(S.a,{className:"textfield-register",type:"password",label:"password",onChange:function(e){return y(e.currentTarget.value)}}),Object(r.jsx)(S.a,{label:"birthday",type:"date",className:"textfield-register",defaultValue:"2017-05-24",InputLabelProps:{shrink:!0},onChange:function(e){return $(e.currentTarget.value)}}),Object(r.jsx)(v.a,{className:"submit-register",variant:"contained",color:"primary",type:"submit",children:"Register"})]})]})})}));function I(){var e=Object(b.a)(["\n    mutation Login($password:String!, $email:String!){ \n        login(\n            \n            email: $email\n            password: $password\n            \n        ){\n            id\n            token\n            username\n        }\n    }\n"]);return I=function(){return e},e}var D=Object(m.gql)(I()),F=Object(f.b)(null,(function(e){return{setUser:function(t){e({type:"SET_USER",user:t})}}}))((function(e){var t=e.setUser,n=Object(a.useState)(),c=Object(j.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(),b=Object(j.a)(u,2),l=b[0],f=b[1],h=Object(m.useMutation)(D),p=Object(j.a)(h,1)[0],g=Object(O.g)(),y=function(){var e=Object(d.a)(o.a.mark((function e(n){var r,a,c,i,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),s&&l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p({variables:{email:s,password:l}});case 5:r=e.sent,a=r.data,c=a.login,i=c.id,u=c.token,d=c.username,localStorage.setItem("token",u),t({id:i,email:s,username:d}),g.push("/feed");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{id:"register-container",children:Object(r.jsxs)("div",{id:"form-register-container",children:[Object(r.jsx)(x.a,{variant:"h4",style:{textAlign:"center"},children:"Register"}),Object(r.jsxs)("form",{onSubmit:y,children:[Object(r.jsx)(S.a,{className:"textfield-register",type:"email",label:"email",onChange:function(e){return i(e.currentTarget.value)}}),Object(r.jsx)(S.a,{className:"textfield-register",type:"password",label:"password",onChange:function(e){return f(e.currentTarget.value)}}),Object(r.jsx)(v.a,{className:"submit-register",variant:"contained",color:"primary",type:"submit",children:"Register"})]})]})})})),U=n(89),E=n.n(U),M=n(131),q=n.n(M),A=n(132),T=n(236),_=n(235),P=n(130),R=n.n(P);n(162);function L(){var e=Object(b.a)(["\n    mutation GetUsers($username:String!){\n        getUsers(username:$username){\n            id,\n            username\n        }\n    }\n"]);return L=function(){return e},e}var G=Object(m.gql)(L()),B=Object(a.forwardRef)((function(e,t){var n=e.users;return Object(r.jsx)("div",{ref:t,className:"users-list",children:n.map((function(e){return Object(r.jsx)(l.b,{to:"/profile/".concat(e.id),children:Object(r.jsx)("div",{className:"item-user",children:Object(r.jsx)(x.a,{variant:"body1",children:e.username})})},e.id)}))})})),z=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(m.useMutation)(G),i=Object(j.a)(s,1)[0],u=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=function(e){u.current&&!u.current.contains(e.target)&&c(null)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}));var b=function(){var e=Object(d.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(n=t.currentTarget.value)){e.next=3;break}return e.abrupt("return",c(null));case 3:return e.next=5,i({variables:{username:n}});case 5:r=e.sent,a=r.data,c(a.getUsers);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"searchbar-container",children:[Object(r.jsx)(R.a,{style:{alignSelf:"center"}}),Object(r.jsx)(_.a,{placeholder:"Search\u2026",className:"inputSearch",onChange:b}),n?Object(r.jsx)(B,{ref:u,users:n}):null]})},Q=(n(164),Object(f.b)((function(e){return{user:e.user}}),null)((function(e){var t=e.user,n=Object(a.useState)(null),c=Object(j.a)(n,2),s=c[0],i=c[1],u=(Object(O.g)(),function(){i(null)});return Object(r.jsxs)("header",{children:[Object(r.jsx)(g.a,{position:"static",children:Object(r.jsxs)(y.a,{className:"toolbar-header",children:[Object(r.jsx)(l.b,{to:"/feed",children:Object(r.jsx)(v.a,{className:"profile-button",children:Object(r.jsx)(q.a,{style:{fontSize:40}})})}),Object(r.jsx)(z,{}),Object(r.jsx)(v.a,{className:"profile-button",onClick:function(e){i(e.currentTarget)},children:Object(r.jsx)(E.a,{style:{fontSize:40}})})]})}),Object(r.jsxs)(A.a,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u,children:[Object(r.jsx)(T.a,{onClick:u,children:Object(r.jsx)(l.b,{to:"profile/".concat(t.id),children:"Profile"})}),Object(r.jsx)(T.a,{onClick:u,children:"Settings"}),Object(r.jsx)(T.a,{onClick:function(){localStorage.removeItem("token"),window.location="/"},children:"Logout"})]})]})}))),W=n(234),J=n(219),V=n(220),H=n(221);n(165);function Y(){var e=Object(b.a)(["\n    query GetUserbyID($userid:ID){\n        getUserbyID(userid:$userid){\n            friends{\n                userid\n                username\n            }\n        }\n    }\n"]);return Y=function(){return e},e}var K=Object(m.gql)(Y()),X=function(e){var t=e.friends;return t?Object(r.jsx)("div",{id:"friends-chat-list",children:t.map((function(e){var t=e.username,n=e.userid;return Object(r.jsxs)(l.b,{to:"/chat",className:"item-friend",children:[Object(r.jsx)(E.a,{style:{color:"#2196f3"}}),Object(r.jsx)("span",{className:"item-friend-username",children:t})]},n)}))}):Object(r.jsx)("div",{children:"No friends yet"})},Z=Object(f.b)((function(e){return{user:e.user,friends:e.friends}}),(function(e){return{setFriends:function(t){e({type:"SET_FRIENDS",friends:t})}}}))((function(e){var t=e.user,n=e.friends,c=e.setFriends,s=Object(m.useQuery)(K,{variables:{userid:t.id}}),i=s.data,u=s.loading;return Object(a.useEffect)((function(){u||c(i.getUserbyID.friends)}),[u,i,c]),Object(r.jsxs)(W.a,{id:"chat-container",children:[Object(r.jsx)(J.a,{children:Object(r.jsx)(x.a,{id:"title-chat",variant:"h6",children:Object(r.jsx)(V.a,{badgeContent:n?n.length:0,color:"primary",children:"Friends Active"})})}),Object(r.jsx)(H.a,{children:u?Object(r.jsx)("div",{children:"loading"}):Object(r.jsx)(X,{friends:n})})]})}));n(166);function ee(){var e=Object(b.a)(["\n    mutation CreatePost($body:String!){\n        createPost(body:$body){id}\n    }\n"]);return ee=function(){return e},e}var te=Object(m.gql)(ee()),ne=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(m.useMutation)(te),i=Object(j.a)(s,1)[0],u=function(){var e=Object(d.a)(o.a.mark((function e(t){var r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==!n.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i({variables:{body:n}});case 5:r=e.sent,a=r.data,s=a.createPost.id,c(""),console.log(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("main",{id:"new-post-container",children:Object(r.jsxs)("div",{className:"form-container-post",children:[Object(r.jsx)(x.a,{variant:"h5",children:"Write a new post"}),Object(r.jsxs)("form",{onSubmit:u,children:[Object(r.jsx)("textarea",{value:n,placeholder:"What's in your mind?",className:"input-post",onChange:function(e){c(e.currentTarget.value)}}),Object(r.jsx)("div",{className:"button-post-container",children:Object(r.jsx)(v.a,{type:"submit",variant:"contained",color:"primary",children:"Post"})})]})]})})},re=n(105),ae=(n(167),n(59)),ce=n.n(ae),se=n(226),ie=n(227),ue=n(237),oe=n(181),de=n(228),je=n(229),be=n(230),le=n(222),Oe=n(223),fe=n(231),me=n(232),he=n(224),xe=function(e){var t=e.comment,n=e.deleteComment,c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],u=s[1],o=t.body,d=t.createdAt,b=t.username,l=t.id;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"comment",children:[Object(r.jsxs)("div",{className:"comment-header",children:[Object(r.jsxs)("div",{className:"comment-header-user",children:[Object(r.jsx)(oe.a,{children:Object(r.jsx)(le.a,{})}),Object(r.jsx)(x.a,{className:"username-comment",variant:"body2",children:b}),Object(r.jsx)(x.a,{className:"time-comment",children:ce()(d).fromNow()})]}),Object(r.jsx)(oe.a,{children:Object(r.jsx)(Oe.a,{onClick:function(e){u(e.currentTarget)}})})]}),Object(r.jsx)(x.a,{className:"comment-body",variant:"body1",children:o})]}),Object(r.jsx)(A.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){u(null)},children:Object(r.jsx)(T.a,{onClick:n(l),children:"Delete comment"})})]})};n(169);function ve(){var e=Object(b.a)(["\n    mutation DeleteComment($postid:ID, $commentid:ID){\n        deleteComment(postid:$postid, commentid:$commentid)\n    }\n"]);return ve=function(){return e},e}function pe(){var e=Object(b.a)(["\n    mutation CreateComment($postid:ID, $body:String){\n        createComment(postid:$postid, body:$body){\n            id\n            body\n            username\n            createdAt\n        }\n    }\n"]);return pe=function(){return e},e}var ge=Object(m.gql)(pe()),ye=Object(m.gql)(ve()),ke=function(e){var t=e.comments,n=e.postid,c=Object(m.useMutation)(ge),s=Object(j.a)(c,1)[0],i=Object(m.useMutation)(ye),u=Object(j.a)(i,1)[0],b=Object(a.useState)(""),l=Object(j.a)(b,2),O=l[0],f=l[1],h=Object(a.useState)(t),x=Object(j.a)(h,2),v=x[0],p=x[1],g=function(){var e=Object(d.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==O.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s({variables:{postid:n,body:O}});case 4:t=e.sent,r=t.data,v.unshift(r.createComment),f(""),p(v);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){return Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v=v.filter((function(t){return t.id!==e})),p(v),t.next=4,u({variables:{commentid:e,postid:n}});case 4:case"end":return t.stop()}}),t)})))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"input-comment-container",children:[Object(r.jsx)(_.a,{className:"input-comment",placeholder:"Write a comment",multiline:!0,value:O,onChange:function(e){return f(e.currentTarget.value)}}),Object(r.jsx)(oe.a,{className:"send-icon",onClick:g,children:Object(r.jsx)(he.a,{})})]}),v.map((function(e){return Object(r.jsx)(xe,{comment:e,deleteComment:y},e.id)}))]})},Ne=n(225);function Se(){var e=Object(b.a)(["\n    mutation RemoveLikePost($postid:ID!){\n        removeLikePost(postid:$postid)\n    }\n"]);return Se=function(){return e},e}function Ce(){var e=Object(b.a)(["\n    mutation LikePost($postid:ID!){\n        likePost(postid:$postid)\n    }\n"]);return Ce=function(){return e},e}var we=Object(m.gql)(Ce()),$e=Object(m.gql)(Se()),Ie=function(e){var t=e.likeCount,n=e.postid,c=e.likes,s=e.userid,i=Object(a.useState)(!1),u=Object(j.a)(i,2),b=u[0],l=u[1],O=Object(a.useState)(t),f=Object(j.a)(O,2),h=f[0],x=f[1],p=Object(m.useMutation)(we),g=Object(j.a)(p,1)[0],y=Object(m.useMutation)($e),k=Object(j.a)(y,1)[0],N=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{postid:n}});case 2:l(!0),x(h+1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({variables:{postid:n}});case 2:l(!1),x(h-1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){-1!==c.findIndex((function(e){return e.userid===s}))&&l(!0)}),[l,c,s]),Object(r.jsx)(r.Fragment,{children:b?Object(r.jsx)(v.a,{variant:"contained",style:{background:"#f50057",color:"#fff"},startIcon:Object(r.jsx)(Ne.a,{}),onClick:S,children:h}):Object(r.jsx)(v.a,{variant:"contained",color:"default",startIcon:Object(r.jsx)(Ne.a,{}),onClick:N,children:h})})},De=(n(170),Object(f.b)((function(e){return{user:e.user}}),null)((function(e){var t=e.post,n=e.user,c=Object(a.useState)(!1),s=Object(j.a)(c,2),i=s[0],u=s[1],o=t.body,d=t.comments,b=t.imgProfile,l=t.imgPost,O=t.createdAt,f=t.likeCount,m=t.likes,h=t.username,v=t.id;return Object(r.jsxs)(se.a,{className:"post-card",children:[Object(r.jsx)(ie.a,{avatar:b?Object(r.jsx)(ue.a,{src:b}):Object(r.jsx)(le.a,{className:"post-avatar",style:{fontSize:40}}),action:Object(r.jsx)(oe.a,{"aria-label":"settings",children:Object(r.jsx)(Oe.a,{})}),title:h,subheader:ce()(O).fromNow()}),l?Object(r.jsx)(de.a,{image:l}):null,Object(r.jsx)(je.a,{children:Object(r.jsx)(x.a,{variant:"body1",component:"p",children:o})}),Object(r.jsxs)(be.a,{className:"card-actions-post",disableSpacing:!0,children:[Object(r.jsx)(Ie,{userid:n.id,likes:m,likeCount:f,postid:v}),Object(r.jsx)(oe.a,{className:i?"active-comments":null,"aria-label":"forum",onClick:function(){return u(!i)},children:Object(r.jsx)(fe.a,{})}),Object(r.jsx)(oe.a,{"aria-label":"share",children:Object(r.jsx)(me.a,{})})]}),Object(r.jsx)("div",{className:i?"show-comments":"hidde-comments",children:Object(r.jsx)(ke,{comments:d,postid:v})})]},t.id)}))),Fe=function(e){var t=e.posts;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsx)(De,{post:e},e.id)}))})},Ue=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e};n(171);function Ee(){var e=Object(b.a)(["\n    mutation GetPosts($userid:ID!){\n        getPosts(userid:$userid){\n            id\n            body\n            createdAt\n            username\n            comments{\n                id\n                body\n                username\n                createdAt\n            }\n            likes{\n                id\n                userid\n                username\n                createdAt\n            }\n            likeCount\n            commentCount\n\n        }\n    }\n"]);return Ee=function(){return e},e}var Me=Object(m.gql)(Ee()),qe=Object(f.b)((function(e){return{friends:e.friends}}),null)((function(e){var t=e.friends,n=Object(m.useMutation)(Me),c=Object(j.a)(n,1)[0],s=Object(a.useState)([]),i=Object(j.a)(s,2),u=i[0],b=i[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var n,r,a,s,i,u,d,j,l,O,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:n=[],r=Object(re.a)(t);try{for(r.s();!(a=r.n()).done;)s=a.value,i=s.userid,u=c({variables:{userid:i}}),n.push(u)}catch(o){r.e(o)}finally{r.f()}return e.next=7,Promise.all(n);case 7:d=e.sent,j=[],l=Object(re.a)(d);try{for(l.s();!(O=l.n()).done;)f=O.value,j=j.concat(f.data.getPosts.slice(0,10))}catch(o){l.e(o)}finally{l.f()}b(Ue(j));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,c]),Object(r.jsx)("div",{id:"posts-friends-container",children:Object(r.jsx)("div",{id:"posts-friends-lists",children:Object(r.jsx)(Fe,{posts:u})})})})),Ae=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(ne,{}),Object(r.jsx)(qe,{}),Object(r.jsx)(Z,{})]})};n(172);function Te(){var e=Object(b.a)(["\n    query GetUserbyID($userid:ID!){\n        getUserbyID(userid:$userid){\n            email\n            username\n        }\n    }\n"]);return Te=function(){return e},e}var _e=Object(m.gql)(Te()),Pe=function(){var e=Object(O.h)().userid,t=Object(m.useQuery)(_e,{variables:{userid:e}}).data;if(!t)return Object(r.jsx)("div",{});var n=t.getUserbyID,a=n.email,c=n.username;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"info-user",children:Object(r.jsx)(le.a,{className:"avatar-user",style:{fontSize:200}})}),Object(r.jsxs)("div",{className:"info-user-text",children:[Object(r.jsx)("div",{className:"info-user",children:Object(r.jsx)(x.a,{variant:"h5",children:c})}),Object(r.jsx)("div",{className:"info-user",children:Object(r.jsx)(x.a,{variant:"h5",children:a})})]})]})},Re=(n(173),function(){return Object(r.jsxs)("div",{className:"lds-spinner",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})});n(174);function Le(){var e=Object(b.a)(["\n    mutation GetPosts($userid:ID!){\n        getPosts(userid:$userid){\n            id\n            body\n            createdAt\n            username\n            comments{\n                id\n                body\n                username\n                createdAt\n            }\n            likes{\n                id\n                userid\n                username\n                createdAt\n            }\n            likeCount\n            commentCount\n\n        }\n    }\n"]);return Le=function(){return e},e}var Ge=Object(m.gql)(Le()),Be=function(){var e=Object(O.h)().userid,t=Object(a.useState)(null),n=Object(j.a)(t,2),c=n[0],s=n[1],i=Object(m.useMutation)(Ge),u=Object(j.a)(i,1)[0];if(Object(a.useEffect)((function(){(function(){var t=Object(d.a)(o.a.mark((function t(){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u({variables:{userid:e}});case 2:n=t.sent,r=n.data,s(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,u]),!c)return Object(r.jsx)("div",{});var b=null===c||void 0===c?void 0:c.getPosts;return Object(r.jsx)("div",{className:"posts-user-container",children:c?Object(r.jsx)(Fe,{posts:b}):Object(r.jsx)(Re,{})})};n(175);function ze(){var e=Object(b.a)(["\n    mutation RemoveFriend($userid:ID!){\n        removeFriend(userid:$userid)\n    }\n"]);return ze=function(){return e},e}function Qe(){var e=Object(b.a)(["\n    mutation AddFriend($userid:ID!){\n        addFriend(userid:$userid)\n    }\n"]);return Qe=function(){return e},e}function We(){var e=Object(b.a)(["\n    query GetUserbyID($userid:ID!){\n        getUserbyID(userid:$userid){\n            username\n            friends{\n                userid\n            }\n        }\n    }\n"]);return We=function(){return e},e}var Je=Object(m.gql)(We()),Ve=Object(m.gql)(Qe()),He=Object(m.gql)(ze()),Ye=function(e){var t=e.userid,n=e.setFriend,a=e.setFriends,c=e.friends,s=e.username,i=Object(m.useMutation)(Ve),u=Object(j.a)(i,1)[0],b=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{userid:t}});case 2:n(!0),c=c.concat([{username:s,userid:t}]),a(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(v.a,{variant:"contained",color:"primary",onClick:b,children:"Add Friend"})},Ke=function(e){var t=e.userid,n=e.setFriend,a=e.setFriends,c=e.friends,s=Object(m.useMutation)(He),i=Object(j.a)(s,1)[0],u=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{userid:t}});case 2:n(!1),c=c.filter((function(e){return e.userid!==t})),a(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(v.a,{variant:"contained",color:"secondary",onClick:u,children:"Remove Friend"})},Xe=Object(f.b)((function(e){return{user:e.user,friends:e.friends}}),(function(e){return{setFriends:function(t){e({friends:t,type:"SET_FRIENDS"})}}}))((function(e){var t=e.user,n=e.setFriends,c=e.friends,s=Object(O.h)().userid,i=Object(m.useQuery)(Je,{variables:{userid:s}}).data,u=Object(a.useState)(!1),o=Object(j.a)(u,2),d=o[0],b=o[1];return Object(a.useEffect)((function(){i&&(i.getUserbyID.friends&&i.getUserbyID.friends.find((function(e){return e.userid===t.id}))&&b(!0))}),[i,t.id]),s===t.id?Object(r.jsx)("div",{children:"self profile"}):i?Object(r.jsx)("div",{className:"ADC-button",children:d?Object(r.jsx)(Ke,{userid:s,setFriend:b,setFriends:n,friends:c}):Object(r.jsx)(Ye,{userid:s,setFriend:b,setFriends:n,friends:c,username:i.getUserbyID.username})}):Object(r.jsx)("div",{children:"loading"})})),Ze=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)("main",{children:Object(r.jsxs)(h.a,{container:!0,children:[Object(r.jsxs)(h.a,{xs:4,item:!0,style:{padding:40},children:[Object(r.jsx)(Pe,{}),Object(r.jsx)(Xe,{})]}),Object(r.jsx)(h.a,{xs:6,item:!0,children:Object(r.jsx)(Be,{})}),Object(r.jsx)(h.a,{xs:2,item:!0})]})})]})},et=(n(176),function(e){var t=e.friends,n=e.setActiveChat,a=function(e){return function(){n(e)}};return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsxs)("div",{className:"item-friend-chat",onClick:a(e),children:[Object(r.jsx)(le.a,{className:"item-friend-chat-icon"}),Object(r.jsx)(x.a,{className:"item-friend-chat-username",children:e.username})]},e.userid)}))})});function tt(){var e=Object(b.a)(["\n    mutation SendMessage($chatid: ID!, $bodyMessage:String!){\n        sendMessage(chatid: $chatid, bodyMessage: $bodyMessage){\n            _id\n            createdAt\n        }\n    }\n"]);return tt=function(){return e},e}var nt=Object(m.gql)(tt()),rt=function(e){var t=e._chatid,n=Object(a.useState)(""),c=Object(j.a)(n,2),s=c[0],i=c[1],u=Object(m.useMutation)(nt),b=Object(j.a)(u,1)[0],l=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==s.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b({variables:{chatid:t,bodyMessage:s}});case 4:i("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{id:"send-message",children:[Object(r.jsx)(_.a,{className:"input-chat-message",placeholder:"write a message",value:s,onChange:function(e){return i(e.currentTarget.value)}}),Object(r.jsx)(oe.a,{onClick:l,children:Object(r.jsx)(he.a,{className:"input-chat-icon"})})]})};n(177);function at(){var e=Object(b.a)(["\n    mutation GetChat($chatid: ID!){\n        getChat(chatid: $chatid){\n            _id\n            messages{\n                sender_id\n                sender_username\n                body_message\n                createdAt\n            }\n        }\n    }\n"]);return at=function(){return e},e}function ct(){var e=Object(b.a)(["\n    mutation CreateChat($partnerid: ID!, $partnername: String!){\n        createChat(partnerid: $partnerid, partnername: $partnername){\n            _id\n            messages{\n                sender_id\n                sender_username\n                body_message\n                createdAt\n            }\n        }\n    }\n"]);return ct=function(){return e},e}var st=Object(m.gql)(ct()),it=Object(m.gql)(at()),ut=Object(f.b)((function(e){return{user:e.user}}),null)((function(e){var t=e.chatid,n=e.activeChat,c=e.user,s=Object(m.useMutation)(st),i=Object(j.a)(s,1)[0],u=Object(m.useMutation)(it),b=Object(j.a)(u,1)[0],l=n.userid,O=n.username,f=Object(a.useState)(null),h=Object(j.a)(f,2),v=h[0],p=h[1],g=Object(a.useState)([]),y=Object(j.a)(g,2),k=y[0],N=y[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{partnerid:l,partnername:O}});case 2:t=e.sent,n=t.data,N(n.createChat.messages),p(n.createChat._id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t?function(){var e=Object(d.a)(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({variables:{chatid:t}});case 2:n=e.sent,r=n.data,N(r.getChat.messages),p(r.getChat._id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():e()}),[l,O,i,b,t]),Object(r.jsxs)("div",{id:"list-messages-container",children:[Object(r.jsx)("div",{className:"",children:k.map((function(e){var t=e.body_message,n=e.createdAt,a=e.sender_username;return Object(r.jsx)("div",{className:c.username===a?"sender-message":"reciver-message",children:Object(r.jsxs)(x.a,{variant:"body2",className:c.username===a?"sender-message-body":"reciver-message-body",children:[t,Object(r.jsx)("span",{className:"createdAt-message",children:ce()(n).fromNow()})]})})})).reverse()}),Object(r.jsx)(rt,{_chatid:v})]})})),ot=function(e){var t=e.chats,n=e.activeChat,a=n.userid,c=(t.filter((function(e){return e.partnerid===a}))[0]||{}).chatid;return Object(r.jsx)(ut,{chatid:c,activeChat:n})};n(178);function dt(){var e=Object(b.a)(["\n    query GetUserbyID($userid: ID){\n        getUserbyID(userid: $userid){\n            friends{\n                userid,\n                username\n            }\n        }\n    }\n"]);return dt=function(){return e},e}function jt(){var e=Object(b.a)(["\n    query GetUserbyID($userid: ID!){\n        getUserbyID(userid:$userid){\n            chats{\n                chatid\n                partnerid\n            }\n        }\n    }\n"]);return jt=function(){return e},e}var bt=Object(m.gql)(jt()),lt=Object(m.gql)(dt()),Ot=Object(f.b)((function(e){return{user:e.user,friends:e.friends}}),(function(e){return{setFriends:function(t){e({type:"SET_FRIENDS",friends:t})}}}))((function(e){var t=e.friends,n=e.setFriends,c=e.user,s=Object(m.useQuery)(bt,{variables:{userid:c.id}}),i=s.loading,u=s.data,o=Object(m.useQuery)(lt,{variables:{userid:c.id}}),d=Object(a.useState)(t?t[0]:null),b=Object(j.a)(d,2),l=b[0],O=b[1];return Object(a.useEffect)((function(){o.data&&(n(o.data.getUserbyID.friends),O(o.data.getUserbyID.friends[0]))}),[o]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{}),l?Object(r.jsx)("div",{id:"messages-container",children:Object(r.jsx)(se.a,{id:"message-container-card",children:Object(r.jsxs)(h.a,{className:"grid-container-chat",container:!0,children:[Object(r.jsx)(h.a,{item:!0,xs:4,children:Object(r.jsx)(et,{friends:t,setActiveChat:O})}),Object(r.jsx)(h.a,{className:"grid-item-messages",item:!0,xs:8,children:i?null:Object(r.jsx)(ot,{chats:u.getUserbyID.chats,activeChat:l})})]})})}):Object(r.jsx)("div",{children:"You have not friends yet"})]})}));function ft(){var e=Object(b.a)(["\n    mutation VerifyToken($token:String){\n        verifyToken(token: $token){\n            id, username, email\n        }\n    }   \n"]);return ft=function(){return e},e}var mt=Object(m.gql)(ft()),ht=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){e({type:"SET_USER",user:t})}}}))((function(e){var t=e.user,n=e.setUser,c=localStorage.getItem("token"),s=Object(m.useMutation)(mt),i=Object(j.a)(s,1)[0];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i({variables:{token:c}});case 5:t=e.sent,r=t.data,n(r.verifyToken),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}})()()}),[n,c,i]),Object(r.jsx)(l.a,{children:Object(r.jsxs)(O.d,{children:[Object(r.jsx)(O.b,{exact:!0,path:"/",children:t?Object(r.jsx)(O.a,{to:"/feed"}):Object(r.jsx)(N,{})}),Object(r.jsx)(O.b,{exact:!0,path:"/login",children:t?Object(r.jsx)(O.a,{to:"/feed"}):Object(r.jsx)(F,{})}),Object(r.jsx)(O.b,{exact:!0,path:"/register",children:t?Object(r.jsx)(O.a,{to:"/feed"}):Object(r.jsx)($,{})}),Object(r.jsx)(O.b,{exact:!0,path:"/chat",children:t?Object(r.jsx)(Ot,{}):Object(r.jsx)(N,{})}),Object(r.jsx)(O.b,{exact:!0,path:"/profile/:userid",children:t?Object(r.jsx)(Ze,{}):Object(r.jsx)(N,{})}),Object(r.jsx)(O.b,{exact:!0,path:"/feed",children:t?Object(r.jsx)(Ae,{}):Object(r.jsx)(N,{})})]})})})),xt=n(70),vt=n(80),pt={user:null,friends:null,chats:[]},gt=Object(vt.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?Object(xt.a)(Object(xt.a)({},e),{},{user:t.user}):"SET_FRIENDS"===t.type?Object(xt.a)(Object(xt.a)({},e),{},{friends:t.friends}):e})),yt=new m.HttpLink({uri:"/graphql"}),kt=new m.ApolloLink((function(e,t){var n=localStorage.getItem("token");return e.setContext({headers:{authorization:n?"Bearer ".concat(n):null}}),t(e)})),Nt=new m.ApolloClient({link:Object(m.concat)(kt,yt),cache:new m.InMemoryCache});var St=function(){return Object(r.jsx)(f.a,{store:gt,children:Object(r.jsx)(m.ApolloProvider,{client:Nt,children:Object(r.jsx)(ht,{})})})},Ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(St,{})}),document.getElementById("root")),Ct()}},[[179,1,2]]]);
//# sourceMappingURL=main.3af18eea.chunk.js.map